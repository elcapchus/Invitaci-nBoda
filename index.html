<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>M&G | Nuestra Uni√≥n ‚ú®</title>

    <!-- Pre-conexiones para velocidad de fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=Montserrat:wght@200;300;400;600&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --gold: #bfa37e;
            --gold-bright: #d4af37;
            --dark: #1a1a1a;
            --sand: #f8f7f4;
            --stone: #7a7a7a;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--sand);
            color: var(--dark);
            overflow-x: hidden;
        }

        .font-serif { font-family: 'Cormorant Garamond', serif; }

        /* Part√≠culas optimizadas */
        #particles-js {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.6;
        }

        /* Hero optimizado para m√≥viles */
        .hero-container {
            height: 100svh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)), 
                        url('/IMG_2431.png') center/cover no-repeat;
            position: relative;
            z-index: 2;
        }

        .hero-overlay {
            padding: 2.5rem 1.5rem;
            width: 90%;
            max-width: 600px;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
        }

        /* Countdown */
        .countdown-item {
            background: white;
            color: var(--dark);
            padding: 12px;
            min-width: 75px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            border-bottom: 3px solid var(--gold-bright);
        }

        /* Animaciones de entrada suave */
        .reveal {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
            will-change: opacity, transform;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Botones de Lujo */
        .btn-luxury {
            padding: 0.8rem 1.8rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            font-size: 0.7rem;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 1px solid var(--dark);
            background: white;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-luxury:hover {
            background: var(--dark);
            color: white;
            transform: translateY(-2px);
        }

        /* Galer√≠a Estilo Polaroid */
        .polaroid {
            background: white;
            padding: 12px 12px 24px 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }

        .polaroid:hover {
            transform: scale(1.05) rotate(0deg) !important;
            z-index: 10;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .floating { animation: floating 3s ease-in-out infinite; }
    </style>
</head>
<body>

    <canvas id="particles-js"></canvas>

    <!-- HERO SECTION -->
<header data-section="hero" class="relative min-h-screen w-full flex items-center justify-center overflow-hidden bg-stone-900 text-white">
    
    <div class="absolute inset-0 z-0">
        <img src="/IMG_2431.png" alt="Miguel y Geraldyne" class="w-full h-full object-cover opacity-50 scale-105 animate-slow-zoom">
        <div class="absolute inset-0 bg-gradient-to-b from-stone-900/40 via-transparent to-stone-900"></div>
    </div>

    <div class="relative z-10 w-full max-w-5xl px-6 text-center reveal active">
        
        <div class="mb-8 inline-flex items-center gap-4">
            <div class="h-[1px] w-8 bg-amber-400/50"></div>
            <p class="uppercase tracking-[0.6em] text-[11px] font-medium text-amber-200">Nuestra Uni√≥n</p>
            <div class="h-[1px] w-8 bg-amber-400/50"></div>
        </div>

        <h1 class="mb-10 group">
            <span class="block font-serif text-6xl md:text-8xl lg:text-9xl font-light italic leading-none drop-shadow-2xl">
                Miguel
            </span>
            <span class="flex items-center justify-center gap-6 my-2">
                <span class="h-[1px] w-12 bg-white/20 hidden md:block"></span>
                <span class="font-light text-3xl md:text-5xl text-amber-400/90 serif italic">&</span>
                <span class="h-[1px] w-12 bg-white/20 hidden md:block"></span>
            </span>
            <span class="block font-serif text-6xl md:text-8xl lg:text-9xl font-light italic leading-none drop-shadow-2xl">
                Geraldyne
            </span>
        </h1>

        <div class="inline-block px-10 py-4 border-y border-white/20 mb-12">
            <p class="tracking-[0.5em] text-sm md:text-base font-light uppercase">
                02 <span class="text-amber-400">.</span> MAYO <span class="text-amber-400">.</span> 2026
            </p>
        </div>

        <div id="countdown" class="flex justify-center gap-4 md:gap-10">
            <div class="flex flex-col">
                <span id="days" class="text-3xl md:text-5xl font-light font-serif text-white">00</span>
                <span class="text-[10px] uppercase tracking-[0.3em] text-amber-200/60 mt-2 font-medium">D√≠as</span>
            </div>
            <div class="w-[1px] h-10 bg-white/10 self-center"></div>
            <div class="flex flex-col">
                <span id="hours" class="text-3xl md:text-5xl font-light font-serif text-white">00</span>
                <span class="text-[10px] uppercase tracking-[0.3em] text-amber-200/60 mt-2 font-medium">Horas</span>
            </div>
            <div class="w-[1px] h-10 bg-white/10 self-center"></div>
            <div class="flex flex-col">
                <span id="minutes" class="text-3xl md:text-5xl font-light font-serif text-white">00</span>
                <span class="text-[10px] uppercase tracking-[0.3em] text-amber-200/60 mt-2 font-medium">Mins</span>
            </div>
        </div>
    </div>

    <div class="absolute bottom-12 flex flex-col items-center">
        <div class="relative w-[1px] h-16 bg-white/20 overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1/2 bg-amber-400 animate-scroll-line"></div>
        </div>
        <span class="text-[9px] uppercase tracking-[0.5em] mt-4 opacity-50">Desliza</span>
    </div>

</header>

<style>
    @keyframes scroll-line {
        0% { transform: translateY(-100%); }
        100% { transform: translateY(200%); }
    }
    .animate-scroll-line {
        animation: scroll-line 2s infinite ease-in-out;
    }
    @keyframes slow-zoom {
        0% { transform: scale(1); }
        100% { transform: scale(1.1); }
    }
    .animate-slow-zoom {
        animation: slow-zoom 20s infinite alternate linear;
    }
</style>

    <!-- INTRODUCCI√ìN -->
<section data-section="intro" class="relative py-28 px-6 overflow-hidden bg-[#faf9f6]">
    <div class="absolute inset-0 flex items-center justify-center opacity-[0.03] select-none pointer-events-none">
        <p class="font-serif italic text-[15vw] leading-none text-stone-900 whitespace-nowrap">
            Miguel & Geraldyne
        </p>
    </div>

    <div class="max-w-5xl mx-auto relative z-10">
        <div class="grid md:grid-cols-12 gap-12 items-center">
            
            <div class="md:col-span-5 text-left border-l-2 border-amber-200 pl-8 py-4 reveal">
                <span class="text-amber-500 text-4xl font-serif">‚Äú</span>
                <p class="text-stone-500 font-serif italic text-2xl leading-relaxed">
                    Todo lo sufre, todo lo cree, todo lo espera, todo lo soporta. El amor nunca deja de ser.
                </p>
                <p class="mt-4 text-amber-600 font-medium tracking-widest uppercase text-xs">
                    1 Corintios 13:7-8
                </p>
            </div>

            <div class="md:col-span-7 bg-white/60 backdrop-blur-sm p-10 md:p-14 shadow-xl shadow-stone-200/50 rounded-2xl reveal">
                <div class="text-center">
                    <span class="text-4xl mb-6 block drop-shadow-sm">üïäÔ∏è</span>
                    
                    <h2 class="font-serif text-4xl md:text-5xl mb-6 text-stone-800 leading-tight">
                        Un camino que decidimos <br> 
                        <span class="italic text-amber-700">recorrer juntos</span>
                    </h2>

                    <div class="flex justify-center items-center gap-3 mb-8">
                        <div class="h-[1px] w-12 bg-amber-300"></div>
                        <div class="w-1.5 h-1.5 rounded-full bg-amber-400"></div>
                        <div class="h-[1px] w-12 bg-amber-300"></div>
                    </div>

                    <p class="text-stone-600 leading-[1.8] font-light text-lg">
                        Hay momentos que cambian la vida para siempre. Queremos compartir este inicio con las personas que amamos.
                    </p>
                </div>
            </div>

        </div>
    </div>

    <div class="absolute bottom-10 right-10 opacity-20 hidden md:block">
        <svg width="120" height="120" viewBox="0 0 100 100" fill="none" class="stroke-amber-600">
            <path d="M10 50 Q 50 10 90 50 T 10 50" stroke-width="0.5"/>
            <path d="M20 50 Q 50 20 80 50 T 20 50" stroke-width="0.5"/>
        </svg>
    </div>
</section>

    <!-- GALER√çA -->
<section data-section="gallery" class="relative py-32 px-6 bg-[#fdfcf9] overflow-hidden">
    
    <div class="absolute inset-0 opacity-[0.05] pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/natural-paper.png')]"></div>
    
    <div class="absolute top-20 left-[-5%] opacity-[0.03] pointer-events-none rotate-90 origin-left">
        <span class="text-[15vw] font-serif font-light italic text-stone-900 leading-none">Memorias</span>
    </div>

    <div class="relative z-10 text-center mb-24 reveal">
        <span class="text-amber-600 font-medium tracking-[0.5em] uppercase text-[10px] mb-4 block">Nuestros Momentos</span>
        <h2 class="text-5xl md:text-7xl font-serif text-stone-800 italic font-light">Galer√≠a de <span class="text-amber-700/80">Amor</span></h2>
        <div class="w-16 h-[1px] bg-amber-300 mx-auto mt-8"></div>
    </div>

    <div class="relative z-10 max-w-7xl mx-auto">
        <div class="columns-1 md:columns-2 lg:columns-3 gap-12 space-y-12">
            
            <div class="break-inside-avoid reveal">
                <div class="group relative cursor-pointer overflow-hidden bg-white p-3 shadow-[0_10px_30px_rgba(0,0,0,0.05)] transition-all duration-700 hover:shadow-2xl" onclick="openLightbox('/IMG_2348.png')">
                    <img src="/IMG_2348.png" class="w-full grayscale-[50%] group-hover:grayscale-0 transition-all duration-1000 scale-105 group-hover:scale-100" alt="Recuerdo">
                    <div class="absolute inset-0 border-[1px] border-white/20 m-6 pointer-events-none"></div>
                </div>
                <p class="mt-4 font-serif italic text-stone-400 text-sm text-center">Un suspiro en el tiempo</p>
            </div>

            <div class="break-inside-avoid reveal" style="transition-delay: 200ms;">
                <div class="group relative cursor-pointer" onclick="openLightbox('/IMG_2487.png')">
                    <div class="absolute -inset-4 border border-amber-100/50 -rotate-2 group-hover:rotate-0 transition-transform duration-500"></div>
                    <div class="relative bg-stone-900 overflow-hidden">
                        <img src="/IMG_2487.png" class="w-full h-[500px] object-cover opacity-90 group-hover:opacity-100 transition-opacity" alt="Recuerdo">
                    </div>
                </div>
            </div>

            <div class="break-inside-avoid reveal" style="transition-delay: 400ms;">
                <div class="group cursor-pointer bg-white p-8 shadow-sm border border-stone-100 transition-all hover:bg-[#faf9f6]" onclick="openLightbox('/IMG_2465.png')">
                    <img src="/IMG_2465.png" class="w-full aspect-square object-cover mb-4" alt="Recuerdo">
                    <div class="text-right">
                        <span class="text-[9px] tracking-[0.3em] uppercase text-amber-600 font-semibold">Incondicional</span>
                    </div>
                </div>
            </div>

            <div class="break-inside-avoid reveal">
                <div class="group relative cursor-pointer" onclick="openLightbox('/IMG_2509.png')">
                    <div class="overflow-hidden rounded-t-[100px] shadow-inner">
                        <img src="/IMG_2509.png" class="w-full h-80 object-cover group-hover:scale-110 transition-transform duration-[2s]" alt="Recuerdo">
                    </div>
                    <div class="mt-6 flex items-center gap-4">
                        <div class="h-[1px] flex-grow bg-amber-200"></div>
                        <span class="font-serif italic text-stone-400">Las muchas aguas no podr√°n apagar el amor</span>
                    </div>
                </div>
            </div>

            <div class="break-inside-avoid reveal">
                <div class="group relative cursor-pointer p-2 bg-white ring-1 ring-stone-100 shadow-xl" onclick="openLightbox('/IMG_2460.png')">
                    <img src="/IMG_2460.png" class="w-full h-[400px] object-cover grayscale group-hover:grayscale-0 transition-all duration-700" alt="Recuerdo">
                    <div class="absolute bottom-6 left-6 text-white text-left opacity-0 group-hover:opacity-100 transition-opacity">
                        <p class="font-serif italic">Hasta mas all√° de la eternidad</p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="max-w-7xl mx-auto mt-32 text-center reveal">
        <p class="font-serif text-2xl text-stone-400 italic font-light">
            "Cada momento es un paso m√°s en nuestro viaje juntos por la eternidad."
        </p>
    </div>
</section>

    <!-- DETALLES -->
    <section data-section="details" class="relative py-40 bg-[#fdfcf9] overflow-hidden">
    
    <div class="absolute top-10 left-[-5%] opacity-[0.02] pointer-events-none">
        <span class="text-[30vw] font-serif font-black text-stone-900 leading-none"></span>
    </div>
    
    <div class="absolute bottom-0 right-0 w-full h-1/2 bg-[#faf7f2] -z-10 clip-path-diagonal"></div>

    <div class="max-w-7xl mx-auto px-6 relative">
        
        <div class="flex flex-col lg:flex-row items-center gap-20">
            
            <div class="lg:w-1/3 text-left reveal">
                <div class="inline-block mb-6">
                    <span class="text-amber-600 text-xs font-bold uppercase tracking-[0.8em] block mb-2">Importante</span>
                    <div class="h-[2px] w-20 bg-amber-400"></div>
                </div>
                <h2 class="font-serif text-6xl md:text-7xl text-stone-800 italic leading-none mb-8">
                    Los <br> <span class="pl-12">Detalles</span>
                </h2>
                <p class="text-stone-400 font-light text-sm max-w-xs leading-loose italic">
                    Cada elemento ha sido seleccionado con amor para crear una atm√≥sfera m√°gica en nuestra uni√≥n.
                </p>
            </div>

            <div class="lg:w-2/3 grid grid-cols-1 md:grid-cols-2 gap-6 relative">
                
                <div class="md:col-span-2 bg-white p-12 shadow-[40px_40px_80px_-20px_rgba(0,0,0,0.05)] border border-stone-100 flex flex-col md:flex-row justify-between items-center reveal group hover:border-amber-200 transition-colors duration-500">
                    <div class="text-center md:text-left">
                        <span class="text-stone-300 font-serif italic text-4xl mb-4 block">01.</span>
                        <h3 class="font-serif text-3xl mb-2 text-stone-800">Ubicaci√≥n</h3>
                        <p class="text-stone-500 font-light tracking-wide mb-6 md:mb-0">
                            Finca El Valle del Jord√°n ‚Äî <span class="italic text-amber-600">Yangas, Lima</span>
                        </p>
                    </div>
                    <div class="flex flex-col items-center">
                        <span class="text-2xl font-serif text-stone-800 mb-4 block">3:00 PM</span>
                        <a href="https://maps.app.goo.gl/bDDm7goanhMu7gcm7" class="relative overflow-hidden group px-10 py-4 bg-stone-900 text-white text-[10px] tracking-[0.4em] uppercase">
                            <span class="relative z-10 font-bold">Ver Mapa</span>
                            <div class="absolute inset-0 bg-amber-600 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                        </a>
                    </div>
                </div>

                <div class="bg-stone-900 p-10 text-white shadow-2xl reveal group overflow-hidden relative" style="transition-delay: 100ms;">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:scale-125 transition-transform duration-700">
                        <i data-lucide="sparkles" class="w-20 h-20 text-white"></i>
                    </div>
                    <span class="text-stone-500 font-serif italic text-4xl mb-4 block">02.</span>
                    <h3 class="font-serif text-3xl mb-6 text-amber-200">Vestimenta</h3>
                    <div class="space-y-4 font-light text-sm tracking-widest uppercase opacity-80">
                        <p class="border-b border-white/10 pb-2"><span class="text-amber-400">Damas:</span> Largo</p>
                        <p class="border-b border-white/10 pb-2"><span class="text-amber-400">Caballeros:</span> Traje</p>
                    </div>
                    <p class="mt-8 text-[10px] text-amber-200/50 italic tracking-widest uppercase font-bold">Formal Riguroso</p>
                </div>

                <div class="bg-amber-100/30 p-10 border border-amber-200/50 reveal group" style="transition-delay: 200ms;">
                    <span class="text-amber-300 font-serif italic text-4xl mb-4 block">03.</span>
                    <h3 class="font-serif text-3xl mb-6 text-stone-800 italic">Ni√±os</h3>
                    <p class="text-stone-600 font-light text-sm leading-relaxed mb-6">
                        Deseamos que este d√≠a sea un descanso y disfrute. Hemos optado por una celebraci√≥n de 
                        <span class="font-bold text-stone-800">Solo Adultos</span>.
                    </p>
                    <div class="flex gap-2">
                        <div class="h-1 w-8 bg-amber-400"></div>
                        <div class="h-1 w-2 bg-amber-400"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<style>
    .clip-path-diagonal {
        clip-path: polygon(0 15%, 100% 0, 100% 100%, 0% 100%);
    }
</style>

    <!-- REGALOS -->
<section data-section="giff" class="relative py-40 bg-[#fdfcf9] overflow-hidden border-b border-stone-100">
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-[0.02] pointer-events-none">
        <span class="text-[25vw] font-serif italic text-stone-900 leading-none whitespace-nowrap">Gratitud</span>
    </div>

    <div class="max-w-5xl mx-auto px-6 relative z-10">
        <div class="flex flex-col items-center text-center">
            <div class="mb-12 reveal">
                <span class="text-amber-600 font-bold text-[10px] uppercase tracking-[0.6em] block mb-4">Mesa de Regalos</span>
                <h2 class="font-serif text-5xl md:text-7xl text-stone-800 italic leading-tight">Tu presencia es <br> nuestro mejor <span class="text-amber-700/80">regalo</span></h2>
            </div>

            <div class="max-w-xl reveal" style="transition-delay: 200ms;">
                <p class="text-stone-500 font-light leading-loose text-lg italic mb-12">
                    "Si de igual manera deseas tener un detalle con nosotros, ponemos a tu disposici√≥n nuestra mesa de novios."
                </p>
                
                <a href="https://www.noviosfalabella.com.pe/public/resultadoBusquedaNovios.do?categoria=todas&idsJerarquias=&nombreCategoria=&nivelCategoria=&codigoEvento=&dvEvento=&radTipoBusqueda=1&txtBusqueda=728804-02" target="_blank" 
                   class="group relative inline-flex items-center justify-center px-12 py-6 overflow-hidden border border-stone-200 bg-white transition-all duration-500 hover:border-stone-800">
                    <div class="absolute inset-x-0 bottom-0 h-0 bg-stone-900 transition-all duration-500 group-hover:h-full"></div>
                    <span class="relative z-10 text-[11px] uppercase tracking-[0.5em] font-bold text-stone-800 group-hover:text-white transition-colors duration-500">
                        Falabella Novios
                    </span>
                </a>
                
                <p class="mt-10 text-[9px] uppercase tracking-[0.3em] text-stone-400 font-medium">C√≥digo de novios: 728804-02</p>
            </div>
        </div>
    </div>
</section>

<!-- confirmaci√≥n -->
<section data-section="rsvp" class="relative py-40 bg-[#faf8f5]">
    <div class="absolute top-0 right-0 w-1/3 h-full bg-[#f3f0eb] [clip-path:polygon(25%_0%,100%_0%,100%_100%,0%_100%)] hidden lg:block"></div>

    <div class="max-w-5xl mx-auto px-6 relative z-10">
        <div class="bg-white shadow-[0_60px_100px_-20px_rgba(0,0,0,0.06)] border border-stone-100 flex flex-col md:flex-row min-h-[700px] rounded-sm relative">
            
            <div class="bg-stone-900 p-12 text-white md:w-2/5 flex flex-col justify-between relative overflow-hidden">
                <div class="relative z-10">
                    <h2 class="font-serif text-5xl italic mb-6 leading-tight">Nuestra <br> Celebraci√≥n</h2>
                    <div class="h-1 w-12 bg-amber-400 mb-8"></div>
                    <p class="text-[11px] leading-relaxed uppercase tracking-[0.4em] font-light opacity-80 italic">
                        Tu presencia es el regalo m√°s especial que podemos recibir.
                    </p>
                </div>
                
                <div class="relative z-10 border-t border-white/10 pt-8">
                    <p class="text-[9px] uppercase tracking-[0.5em] text-amber-200/60 font-bold mb-2">Fecha L√≠mite</p>
                    <p class="font-serif italic text-xl">31 de Marzo, 2026</p>
                </div>

                <span class="absolute -bottom-10 -right-10 text-[20vw] font-serif italic opacity-[0.03] pointer-events-none">M&G</span>
            </div>

            <div class="p-10 md:p-20 md:w-3/5 bg-white flex flex-col justify-center relative">
                
                <div class="mb-16">
                    <p class="text-amber-600 uppercase tracking-[0.5em] text-[10px] font-bold mb-4">Pase de Invitado</p>
                    <h3 class="font-serif text-4xl md:text-5xl text-stone-800 italic leading-none">Confirmar Asistencia</h3>
                </div>

                <div class="space-y-12">
                    
                    <div class="relative z-50"> <label for="inputNombre" class="text-[10px] uppercase tracking-[0.3em] text-stone-400 mb-2 block font-bold group-focus-within:text-amber-600 transition-colors">
                            Busca tu nombre en la lista
                        </label>
                        <div class="relative">
                            <input type="text" id="inputNombre" required
                                   placeholder="Ej: Miguel Garc√≠a..."
                                   class="peer w-full bg-transparent border-b-2 border-stone-100 py-6 text-2xl font-serif italic outline-none focus:border-stone-800 transition-all placeholder:text-stone-200">
                            
                            <ul id="listaResultados" 
                                class="hidden absolute left-0 top-full w-full z-50 bg-white shadow-[0_25px_50px_-12px_rgba(0,0,0,0.25)] mt-1 max-h-60 overflow-y-auto border border-stone-100 rounded-b-lg">
                                </ul>
                        </div>
                    </div>

                    <div id="datosInvitado" class="hidden space-y-10 pt-4">
                        <div class="py-8 border-y border-stone-50 text-center">
                            <h3 id="nombreConfirmado" class="font-serif text-3xl text-stone-800 italic mb-2"></h3>
                            <p id="infoCupos" class="text-[10px] uppercase tracking-[0.2em] text-amber-700/70 font-bold"></p>
                        </div>

                        <div id="listaAcompanantes" class="space-y-6"></div>

                        <div class="relative">
                            <select id="selectAsistencia" class="w-full bg-stone-50 border border-stone-100 py-5 px-6 text-[11px] uppercase tracking-[0.3em] font-bold outline-none appearance-none cursor-pointer focus:ring-1 focus:ring-amber-200">
                                <option value="si">S√≠, asistir√© con gusto</option>
                                <option value="no">Lamentablemente no podr√© asistir</option>
                            </select>
                            <div class="absolute right-6 top-1/2 -translate-y-1/2 pointer-events-none opacity-40">
                                <i data-lucide="chevron-down" class="w-4 h-4"></i>
                            </div>
                        </div>

                        <button onclick="confirmarAsistencia()" 
                                class="w-full py-7 bg-stone-900 text-white text-[11px] uppercase tracking-[0.6em] font-bold hover:bg-stone-800 transition-all duration-500 shadow-2xl shadow-stone-200">
                            Enviar Confirmaci√≥n
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    /* Clipping para el fondo decorativo */
    .clip-path-side {
        clip-path: polygon(15% 0%, 100% 0%, 100% 100%, 0% 100%);
    }

    /* Scrollbar minimalista para la lista de resultados */
    #listaResultados::-webkit-scrollbar {
        width: 4px;
    }
    #listaResultados::-webkit-scrollbar-track {
        background: #f9f8f6;
    }
    #listaResultados::-webkit-scrollbar-thumb {
        background: #e2e0db;
    }

    /* Estilo para los √≠tems de la lista de resultados (v√≠a JS) */
    .resultado-item {
        padding: 1.25rem 1.5rem;
        cursor: pointer;
        font-family: serif;
        font-style: italic;
        font-size: 1.2rem;
        border-bottom: 1px solid #fcfbf9;
        transition: all 0.3s ease;
    }
    .resultado-item:hover {
        background-color: #faf9f6;
        padding-left: 2rem;
        color: #b45309; /* amber-700 */
    }
</style>

    <!-- ROBOT GUIA-->
<div id="robotMaster" class="fixed bottom-6 right-6 z-[9999] flex flex-col items-center animate-bounce-slow">
    
    <div id="speechBubble" class="mb-4 bg-white/95 backdrop-blur-sm border-2 border-pink-300 p-3 rounded-2xl shadow-xl text-stone-700 text-sm font-bold opacity-0 transition-all duration-500 scale-90 max-w-[180px] text-center relative italic">
        <div id="speechText">Cargando...</div>
        <div class="absolute -bottom-2 right-8 w-4 h-4 bg-white border-r-2 border-b-2 border-pink-300 rotate-45"></div>
    </div>

    <div id="robotCharacter" class="cursor-pointer group relative">
        <div class="absolute -top-6 left-1/2 -translate-x-1/2 flex flex-col items-center">
            <div id="robotAntenna" class="text-xs animate-pulse">‚ù§Ô∏è</div>
            <div class="w-0.5 h-3 bg-pink-400"></div>
        </div>

        <div id="robotFace" class="w-20 h-20 bg-gradient-to-br from-pink-100 to-rose-300 rounded-[30px] shadow-2xl flex items-center justify-center border-b-4 border-rose-400 transition-all duration-700 ease-in-out">
            <div id="robotEmoji" class="text-4xl transition-all duration-500 transform group-hover:scale-125">
                üòä
            </div>
        </div>
        <div class="w-16 h-2 bg-black/10 rounded-[100%] mt-4 blur-md mx-auto"></div>
    </div>
</div>

<style>
    @keyframes bounce-slow {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-12px); }
    }
    .animate-bounce-slow {
        animation: bounce-slow 3s ease-in-out infinite;
    }
</style>

<script>
const face = document.getElementById('robotFace');
const emoji = document.getElementById('robotEmoji');
const speechText = document.getElementById('speechText');
const speechBubble = document.getElementById('speechBubble');
const antenna = document.getElementById('robotAntenna');

const sectionThemes = {
    'hero': {
        msg: "¬°Bienvenidos! ‚ù§Ô∏è",
        emoji: "üòä",
        bg: "from-pink-100 to-rose-300",
        border: "border-rose-400",
        antenna: "‚ù§Ô∏è"
    },
    'gallery': {
        msg: "¬°Mira nuestras fotos favoritas! üòç",
        emoji: "ü§©",
        bg: "from-blue-100 to-cyan-200",
        border: "border-cyan-400",
        antenna: "‚ú®"
    },
    'details': {
        msg: "Aqu√≠ tienes toda la informaci√≥n importante üìç",
        emoji: "üßê",
        bg: "from-emerald-100 to-teal-200",
        border: "border-teal-400",
        antenna: "üîî"
    },
    'giff': {
        msg: "Si deseas hacernos un detalle... üéÅ",
        emoji: "ü§ë",
        bg: "from-amber-100 to-yellow-200",
        border: "border-yellow-400",
        antenna: "üí∞"
    },
    'rsvp': {
        msg: "¬°Confirma aqu√≠! ¬°Te esperamos! ü•≥",
        emoji: "üíÉ",
        bg: "from-purple-200 to-fuchsia-300",
        border: "border-fuchsia-500",
        antenna: "üéâ"
    }
};

function transformRobot(id) {
    const theme = sectionThemes[id];
    if (!theme) return;

    // 1. Mostrar la burbuja si estaba oculta y no quitarla m√°s
    speechBubble.style.opacity = '1';
    speechBubble.style.transform = 'scale(1)';

    // 2. Cambio de Emoji con peque√±o salto
    emoji.style.transform = "scale(0)";
    setTimeout(() => {
        emoji.innerText = theme.emoji;
        emoji.style.transform = "scale(1)";
        speechText.innerText = theme.msg; // Cambia el texto directo
    }, 200);

    // 3. Cambiar Colores del Cuerpo
    face.className = `w-20 h-20 bg-gradient-to-br ${theme.bg} rounded-[30px] shadow-2xl flex items-center justify-center border-b-4 ${theme.border} transition-all duration-700 ease-in-out`;
    antenna.innerText = theme.antenna;
}

// Detector de Scroll mejorado
let activeSection = "";
window.addEventListener('scroll', () => {
    const sections = Object.keys(sectionThemes);
    let currentInView = "";

    sections.forEach(id => {
        const el = document.querySelector(`[data-section="${id}"]`);
        if (el) {
            const rect = el.getBoundingClientRect();
            // Detecta si la secci√≥n ocupa la parte central de la pantalla
            if (rect.top < window.innerHeight * 0.6 && rect.bottom > window.innerHeight * 0.4) {
                currentInView = id;
            }
        }
    });

    if (currentInView && activeSection !== currentInView) {
        activeSection = currentInView;
        transformRobot(currentInView);
    }
});

// Interacci√≥n al click: Un gui√±o juguet√≥n
document.getElementById('robotCharacter').addEventListener('click', () => {
    const currentEmoji = emoji.innerText;
    emoji.innerText = "üòò";
    setTimeout(() => emoji.innerText = currentEmoji, 1500);
});

// Iniciar con el primer mensaje
setTimeout(() => transformRobot('hero'), 1000);
</script>

    <!-- FOOTER -->
    <footer class="py-16 text-center bg-white border-t border-stone-100 relative z-10">
        <p class="font-serif text-3xl italic mb-4">M <span class="text-stone-300">&</span> G</p>
        <p class="text-stone-400 text-[9px] uppercase tracking-[0.4em]">02 . 05 . 2026 | Hecho con amor</p>
    </footer>

    <!-- LIGHTBOX -->
    <div id="lightbox" class="fixed inset-0 bg-black/95 backdrop-blur-sm hidden items-center justify-center z-[100] transition-opacity duration-300 cursor-zoom-out">
        <img id="lightboxImg" class="max-w-[95%] max-h-[90vh] rounded-lg shadow-2xl transition-transform duration-300">
    </div>

    <!-- AUDIO CONTROL -->
    <audio id="bgMusic" loop preload="auto">
        <source src="audio.mp3" type="audio/mpeg">
    </audio>

    <div id="mainControl" class="fixed bottom-6 left-6 z-50 flex items-center bg-black/60 backdrop-blur-xl p-2 rounded-full shadow-[0_0_30px_rgba(0,0,0,0.5)] border border-white/10 gap-3 group">
        
        <div class="relative w-14 h-14 flex items-center justify-center">
            <div id="albumArt" class="w-full h-full rounded-full border-[6px] border-amber-500/20 bg-cover bg-center transition-all duration-700 ease-in-out" 
                style="background-image: url('https://i.ytimg.com/vi/yW3xNLVXuH8/maxresdefault.jpg'); 
                        clip-path: circle(50% at 50% 50%);
                        mask-image: radial-gradient(circle, transparent 35%, black 36%);
                        -webkit-mask-image: radial-gradient(circle, transparent 35%, black 36%);">
            </div>
            <div class="absolute inset-0 m-auto w-5 h-5 bg-stone-900 rounded-full border border-white/5 shadow-inner"></div>
        </div>

        <button id="musicBtn" class="relative w-10 h-10 flex items-center justify-center bg-amber-500 text-black rounded-full transition-all duration-300 hover:scale-110 active:scale-95 shadow-lg shadow-amber-500/40">
            <span id="pulse" class="absolute inset-0 rounded-full bg-amber-500 animate-ping opacity-0"></span>
            <i data-lucide="play" id="iconPlay" class="relative w-4 h-4 z-10"></i>
            <i data-lucide="pause" id="iconPause" class="relative w-4 h-4 z-10 hidden"></i>
        </button>

        <div class="flex flex-col pr-5">
            <span class="text-[9px] uppercase tracking-[0.2em] text-amber-500 font-black opacity-80">Volume</span>
            <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.3" 
                class="w-16 h-1 bg-white/10 accent-amber-500 rounded-lg appearance-none cursor-pointer">
        </div>
    </div>

<style>
    /* Animaci√≥n de Rotaci√≥n S√∫per Fluida */
    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    .spinning {
        animation: spin 4s linear infinite;
    }

    /* Estado cuando suena */
    .is-playing #pulse { opacity: 0.5; }

    #volumeSlider::-webkit-slider-thumb {
        appearance: none; width: 10px; height: 10px; background: white; border-radius: 50%;
    }
</style>

<script>
    // Inicializar iconos (si usas Lucide)
    if (window.lucide) lucide.createIcons();

    const au = document.getElementById('bgMusic');
    const mBtn = document.getElementById('musicBtn');
    const albumArt = document.getElementById('albumArt');
    const iPl = document.getElementById('iconPlay');
    const iPa = document.getElementById('iconPause');
    const vol = document.getElementById('volumeSlider');
    const container = document.getElementById('mainControl');

    au.volume = 0.3;

    // Funci√≥n para activar visualmente el modo "Reproduciendo"
    const setUIPlaying = (isPlaying) => {
        if (isPlaying) {
            iPl.classList.add('hidden');
            iPa.classList.remove('hidden');
            albumArt.classList.add('spinning');
            container.classList.add('is-playing');
        } else {
            iPl.classList.remove('hidden');
            iPa.classList.add('hidden');
            albumArt.classList.remove('spinning');
            container.classList.remove('is-playing');
        }
    };

    mBtn.onclick = () => {
        if(au.paused) { 
            au.play();
            setUIPlaying(true);
        } else { 
            au.pause();
            setUIPlaying(false);
        }
    };

    vol.oninput = (e) => au.volume = e.target.value;

    // SOLUCI√ìN AL AUTOPLAY:
    // Intentar reproducir al cargar la p√°gina
    window.addEventListener('load', () => {
        const promise = au.play();
        if (promise !== undefined) {
            promise.then(() => {
                // Si el autoplay funciona, activamos el giro inmediatamente
                setUIPlaying(true);
            }).catch(error => {
                console.log("Autoplay bloqueado por el navegador. Esperando interacci√≥n.");
            });
        }
    });

    // Como respaldo, si el usuario hace clic en CUALQUIER PARTE de la web, se activa
    document.addEventListener('click', () => {
        if (au.paused) {
            au.play().then(() => setUIPlaying(true));
        }
    }, { once: true });
</script>

    <!-- SCRIPTS -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBeVis1IYntFgRenEbKqurxF0tt3Jst-SY",
            authDomain: "boda-aa69f.firebaseapp.com",
            databaseURL: "https://boda-aa69f-default-rtdb.firebaseio.com",
            projectId: "boda-aa69f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const auth = getAuth(app);
        signInAnonymously(auth);

        const invitadosRef = ref(db, "invitados");
        let listaInvitados = [];
        let invitadoActualId = null;

        onValue(invitadosRef, (snapshot) => {
            listaInvitados = [];
            snapshot.forEach(child => {
                listaInvitados.push({ id: child.key, ...child.val() });
            });
            if (invitadoActualId) {
                const act = listaInvitados.find(i => i.id === invitadoActualId);
                if (act) renderInvitado(act);
            }
        });

        // Buscador optimizado
        const input = document.getElementById("inputNombre");
        const res = document.getElementById("listaResultados");

        input.addEventListener("input", (e) => {
            const txt = e.target.value.toLowerCase().trim();
            res.innerHTML = "";
            if (txt.length < 2) { res.classList.add("hidden"); return; }

            const filtrados = listaInvitados.filter(i => i.nombre.toLowerCase().includes(txt)).slice(0, 5);
            if (!filtrados.length) { res.classList.add("hidden"); return; }

            res.classList.remove("hidden");
            filtrados.forEach(inv => {
                const li = document.createElement("li");
                li.className = "p-3 hover:bg-stone-50 cursor-pointer text-sm border-b border-stone-50 last:border-0";
                li.textContent = inv.nombre;
                li.onclick = () => {
                    invitadoActualId = inv.id;
                    input.value = inv.nombre;
                    res.classList.add("hidden");
                    renderInvitado(inv);
                };
                res.appendChild(li);
            });
        });

        function renderInvitado(invitado) {
            document.getElementById("nombreConfirmado").textContent = invitado.nombre;
            document.getElementById("infoCupos").textContent = `${invitado.entradas || 1} Lugares reservados`;
            const listaAcom = document.getElementById("listaAcompanantes");
            listaAcom.innerHTML = "";
            
            (invitado.acompanantes || []).forEach((a, idx) => {
                const d = document.createElement("div");
                d.className = "flex justify-between items-center bg-stone-50 p-3 rounded-lg text-xs";
                d.innerHTML = `<span>${a.nombre}</span> <button class="text-rose-400 hover:underline">Remover</button>`;
                d.querySelector("button").onclick = () => {
                    if(confirm("¬øEliminar acompa√±ante?")){
                        const nuevos = [...invitado.acompanantes];
                        nuevos.splice(idx, 1);
                        update(ref(db, "invitados/" + invitado.id), { 
                            acompanantes: nuevos, 
                            entradas: 1 + nuevos.length 
                        });
                    }
                };
                listaAcom.appendChild(d);
            });
            document.getElementById("datosInvitado").classList.remove("hidden");
        }

        window.confirmarAsistencia = () => {
            if (!invitadoActualId) return;
            const asist = document.getElementById("selectAsistencia").value === "si";
            update(ref(db, "invitados/" + invitadoActualId), { confirmado: asist })
                .then(() => alert("¬°Gracias! Confirmaci√≥n recibida ‚ù§Ô∏è"));
        };
    </script>

    <script>
        lucide.createIcons();

        // Lightbox simple
        const lb = document.getElementById("lightbox");
        const lbImg = document.getElementById("lightboxImg");
        window.openLightbox = (s) => { lbImg.src = s; lb.classList.replace("hidden", "flex"); };
        lb.onclick = () => lb.classList.replace("flex", "hidden");

        // Countdown optimizado
        function updateTime() {
            const diff = new Date("May 02, 2026 15:00:00") - new Date();
            if (diff > 0) {
                document.getElementById('days').innerText = Math.floor(diff / 864e5);
                document.getElementById('hours').innerText = Math.floor((diff % 864e5) / 36e5);
                document.getElementById('minutes').innerText = Math.floor((diff % 36e5) / 6e4);
            }
        }
        setInterval(updateTime, 1000); updateTime();

        // Reveal Observer
        const obs = new IntersectionObserver(es => {
            es.forEach(e => { if(e.isIntersecting) e.target.classList.add('active'); });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach(el => obs.observe(el));

       

        // Part√≠culas sutiles
        const cvs = document.getElementById('particles-js'), cx = cvs.getContext('2d');
        let pts = [];
        function resize() { 
            cvs.width = window.innerWidth; cvs.height = window.innerHeight; 
            pts = Array.from({length:30}, () => ({
                x: Math.random()*cvs.width, y: Math.random()*cvs.height,
                s: Math.random()*1.5, v: Math.random()*0.3+0.1, o: Math.random()*0.4
            }));
        }
        function draw() {
            cx.clearRect(0,0,cvs.width,cvs.height);
            pts.forEach(p => {
                p.y += p.v; if(p.y > cvs.height) p.y = -10;
                cx.fillStyle = `rgba(212,175,55,${p.o})`;
                cx.beginPath(); cx.arc(p.x, p.y, p.s, 0, 7); cx.fill();
            });
            requestAnimationFrame(draw);
        }
        window.onresize = resize; resize(); draw();
    </script>
</body>
</html>
